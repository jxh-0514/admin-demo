(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ff4e92f2"],{"14ae":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"super-flow-demo1"},[n("div",{staticClass:"node-container"},e._l(e.nodeItemList,(function(t){return n("span",{staticClass:"node-item",on:{mousedown:function(n){return e.nodeItemMouseDown(n,t.value)}}},[e._v(" "+e._s(t.label)+" ")])})),0),n("div",{ref:"flowContainer",staticClass:"flow-container"},[n("super-flow",{ref:"superFlow",attrs:{"graph-menu":e.graphMenu,"node-menu":e.nodeMenu,"link-menu":e.linkMenu,"link-base-style":e.linkBaseStyle,"link-style":e.linkStyle,"link-desc":e.linkDesc},scopedSlots:e._u([{key:"node",fn:function(t){var o=t.meta;return[n("div",{staticClass:"flow-node ellipsis",on:{mouseup:e.nodeMouseUp,click:e.nodeClick}},[e._v(" "+e._s(o.name)+" ")])]}}])})],1)]),n("el-dialog",{attrs:{title:e.drawerConf.title,visible:e.drawerConf.visible,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(t){return e.$set(e.drawerConf,"visible",t)}}},[n("el-form",{directives:[{name:"show",rawName:"v-show",value:e.drawerConf.type===e.drawerType.node,expression:"drawerConf.type === drawerType.node"}],ref:"nodeSetting",attrs:{model:e.nodeSetting},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.settingSubmit(t)},submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"节点名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入节点名称",maxlength:"30"},model:{value:e.nodeSetting.name,callback:function(t){e.$set(e.nodeSetting,"name",t)},expression:"nodeSetting.name"}})],1),n("el-form-item",{attrs:{label:"节点描述",prop:"desc"}},[n("el-input",{attrs:{placeholder:"请输入节点描述",maxlength:"30"},model:{value:e.nodeSetting.desc,callback:function(t){e.$set(e.nodeSetting,"desc",t)},expression:"nodeSetting.desc"}})],1)],1),n("el-form",{directives:[{name:"show",rawName:"v-show",value:e.drawerConf.type===e.drawerType.link,expression:"drawerConf.type === drawerType.link"}],ref:"linkSetting",attrs:{model:e.linkSetting},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.settingSubmit(t)},submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"连线描述",prop:"desc"}},[n("el-input",{attrs:{placeholder:"请输入连线描述"},model:{value:e.linkSetting.desc,callback:function(t){e.$set(e.linkSetting,"desc",t)},expression:"linkSetting.desc"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.drawerConf.cancel}},[e._v(" 取 消 ")]),n("el-button",{attrs:{type:"primary"},on:{click:e.settingSubmit}},[e._v(" 确 定 ")])],1)],1)],1)},i=[],l=n("5530"),s=(n("b0c0"),n("7db0"),n("d3b7"),n("159b"),n("b64b"),{node:0,link:1}),a={data:function(){var e=this;return{drawerType:s,drawerConf:{title:"",visible:!1,type:null,info:null,open:function(t,n){var o=e.drawerConf;o.visible=!0,o.type=t,o.info=n,o.type===s.node?(o.title="节点",e.$refs.nodeSetting&&e.$refs.nodeSetting.resetFields(),e.$set(e.nodeSetting,"name",n.meta.name),e.$set(e.nodeSetting,"desc",n.meta.desc)):(o.title="连线",e.$refs.linkSetting&&e.$refs.linkSetting.resetFields(),e.$set(e.linkSetting,"desc",n.meta?n.meta.desc:""))},cancel:function(){e.drawerConf.visible=!1,e.drawerConf.type===s.node?e.$refs.nodeSetting.clearValidate():e.$refs.linkSetting.clearValidate()}},linkSetting:{desc:""},nodeSetting:{name:"",desc:""},dragConf:{isDown:!1,isMove:!1,offsetTop:0,offsetLeft:0,clientX:0,clientY:0,ele:null,info:null},nodeItemList:[{label:"节点1",value:function(){return{width:120,height:40,meta:{label:"1",name:"1"}}}},{label:"节点2",value:function(){return{width:120,height:40,meta:{label:"2",name:"2"}}}},{label:"节点3",value:function(){return{width:120,height:40,meta:{label:"3",name:"3"}}}},{label:"节点4",value:function(){return{width:120,height:40,meta:{label:"4",name:"4"}}}}],graphMenu:[[{label:"节点1",disable:function(e){return!!e.nodeList.find((function(e){return"1"===e.meta.label}))},selected:function(e,t){e.addNode({width:120,height:40,coordinate:t,meta:{label:"1",name:"1"}})}},{label:"节点2",selected:function(e,t){e.addNode({width:120,height:40,coordinate:t,meta:{label:"2",name:"2"}})}},{label:"节点3",selected:function(e,t){e.addNode({width:120,height:40,coordinate:t,meta:{label:"3",name:"3"}})}}],[{label:"节点4",selected:function(e,t){e.addNode({width:120,height:40,coordinate:t,meta:{label:"4",name:"4"}})}}],[{label:"全选",selected:function(e){e.selectAll()}}]],nodeMenu:[[{label:"删除",selected:function(e){e.remove()}},{label:"编辑",selected:function(t){e.drawerConf.open(s.node,t)}}]],linkMenu:[[{label:"删除",selected:function(e){e.remove()}},{label:"编辑",selected:function(t){e.drawerConf.open(s.link,t)}}]],linkBaseStyle:{color:"#666666",hover:"#FF0000",textColor:"#666666",textHover:"#FF0000",font:"14px Arial",dotted:!1,lineDash:[4,4],background:"rgba(255,255,255,0.6)"},fontList:["14px Arial","italic small-caps bold 12px arial"]}},mounted:function(){var e=this;document.addEventListener("mousemove",this.docMousemove),document.addEventListener("mouseup",this.docMouseup),this.$once("hook:beforeDestroy",(function(){document.removeEventListener("mousemove",e.docMousemove),document.removeEventListener("mouseup",e.docMouseup)}))},methods:{flowNodeClick:function(e){console.log(this.$refs.superFlow.graph)},linkStyle:function(e){return e.meta&&"1"===e.meta.desc?{color:"red",hover:"#FF00FF",dotted:!0}:{}},linkDesc:function(e){return e.meta?e.meta.desc:""},settingSubmit:function(){var e=this,t=this.drawerConf;this.drawerConf.type===s.node?(t.info.meta||(t.info.meta={}),Object.keys(this.nodeSetting).forEach((function(n){e.$set(t.info.meta,n,e.nodeSetting[n])})),this.$refs.nodeSetting.resetFields()):(t.info.meta||(t.info.meta={}),Object.keys(this.linkSetting).forEach((function(n){e.$set(t.info.meta,n,e.linkSetting[n])})),this.$refs.linkSetting.resetFields()),t.visible=!1},nodeMouseUp:function(e){e.preventDefault()},nodeClick:function(){console.log(arguments)},docMousemove:function(e){var t=e.clientX,n=e.clientY,o=this.dragConf;o.isMove?(o.ele.style.top=n-o.offsetTop+"px",o.ele.style.left=t-o.offsetLeft+"px"):o.isDown&&(o.isMove=Math.abs(t-o.clientX)>5||Math.abs(n-o.clientY)>5)},docMouseup:function(e){var t=e.clientX,n=e.clientY,o=this.dragConf;if(o.isDown=!1,o.isMove){var i=this.$refs.flowContainer.getBoundingClientRect(),s=i.top,a=i.right,r=i.bottom,d=i.left;if(t>d&&t<a&&n>s&&n<r){var c=this.$refs.superFlow.getMouseCoordinate(t-o.offsetLeft,n-o.offsetTop);this.$refs.superFlow.addNode(Object(l["a"])({coordinate:c},o.info))}o.isMove=!1}o.ele&&(o.ele.remove(),o.ele=null)},nodeItemMouseDown:function(e,t){var n=e.clientX,o=e.clientY,i=e.currentTarget,l=e.currentTarget.getBoundingClientRect(),s=l.top,a=l.left,r=this.dragConf,d=i.cloneNode(!0);Object.assign(this.dragConf,{offsetLeft:n-a,offsetTop:o-s,clientX:n,clientY:o,info:t(),ele:d,isDown:!0}),d.style.position="fixed",d.style.margin="0",d.style.top=o-r.offsetTop+"px",d.style.left=n-r.offsetLeft+"px",this.$el.appendChild(this.dragConf.ele)}}},r=a,d=(n("d080"),n("2877")),c=Object(d["a"])(r,o,i,!1,null,null,null);t["default"]=c.exports},"7db0":function(e,t,n){"use strict";var o=n("23e7"),i=n("b727").find,l=n("44d2"),s="find",a=!0;s in[]&&Array(1)[s]((function(){a=!1})),o({target:"Array",proto:!0,forced:a},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),l(s)},d080:function(e,t,n){"use strict";n("da9e")},da9e:function(e,t,n){}}]);