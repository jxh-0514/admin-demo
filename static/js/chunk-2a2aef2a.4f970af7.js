(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2a2aef2a"],{5289:function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("section",{staticClass:"signature"},[a("div",{staticClass:"signatureBox"},[a("div",{ref:"canvasHW",staticClass:"canvasBox"},[a("canvas",{ref:"canvasF",on:{touchstart:t.touchStart,touchmove:t.touchMove,touchend:t.touchEnd,mousedown:t.mouseDown,mousemove:t.mouseMove,mouseup:t.mouseUp}}),a("div",{staticClass:"btnBox"},[a("div",{on:{click:t.overwrite}},[t._v("重写")]),a("div",{on:{click:t.commit}},[t._v("提交签名")])])])]),a("img",{staticClass:"imgCanvas",attrs:{src:t.imgUrl}})])},i=[],n=(a("14d9"),{data:function(){return{stageInfo:"",imgUrl:"",client:{},points:[],canvasTxt:null,startX:0,startY:0,moveY:0,moveX:0,endY:0,endX:0,w:null,h:null,isDown:!1}},mounted:function(){var t=this.$refs.canvasF;t.height=this.$refs.canvasHW.offsetHeight-500,t.width=this.$refs.canvasHW.offsetWidth-50,this.canvasTxt=t.getContext("2d"),this.stageInfo=t.getBoundingClientRect(),console.log("===================================="),console.log(t),console.log("====================================")},methods:{touchStart:function(t){if(t=t||event,t.preventDefault(),1==t.touches.length){var s={x:t.targetTouches[0].clientX,y:t.targetTouches[0].clientY};this.startX=s.x,this.startY=s.y,this.canvasTxt.beginPath(),this.canvasTxt.moveTo(this.startX,this.startY),this.canvasTxt.lineTo(s.x,s.y),this.canvasTxt.stroke(),this.canvasTxt.closePath(),this.points.push(s)}},touchMove:function(t){if(t=t||event,t.preventDefault(),1==t.touches.length){var s={x:t.targetTouches[0].clientX-this.stageInfo.left,y:t.targetTouches[0].clientY-this.stageInfo.top};this.moveY=s.y,this.moveX=s.x,this.canvasTxt.beginPath(),this.canvasTxt.moveTo(this.startX,this.startY),this.canvasTxt.lineTo(s.x,s.y),this.canvasTxt.stroke(),this.canvasTxt.closePath(),this.startY=s.y,this.startX=s.x,this.points.push(s)}},touchEnd:function(t){if(t=t||event,t.preventDefault(),1==t.touches.length){var s={x:t.targetTouches[0].clientX-this.stageInfo.left,y:t.targetTouches[0].clientY-this.stageInfo.top};this.canvasTxt.beginPath(),this.canvasTxt.moveTo(this.startX,this.startY),this.canvasTxt.lineTo(s.x,s.y),this.canvasTxt.stroke(),this.canvasTxt.closePath(),this.points.push(s)}},mouseDown:function(t){console.log("开始",t),t=t||event,t.preventDefault();var s={x:t.offsetX,y:t.offsetY};this.startX=s.x,this.startY=s.y,this.canvasTxt.beginPath(),this.canvasTxt.moveTo(this.startX,this.startY),this.canvasTxt.lineTo(s.x,s.y),this.canvasTxt.stroke(),this.canvasTxt.closePath(),this.points.push(s),this.isDown=!0},mouseMove:function(t){if(console.log("鼠标移动",t),t=t||event,t.preventDefault(),this.isDown){var s={x:t.offsetX,y:t.offsetY};this.moveY=s.y,this.moveX=s.x,this.canvasTxt.beginPath(),this.canvasTxt.moveTo(this.startX,this.startY),this.canvasTxt.lineTo(s.x,s.y),this.canvasTxt.stroke(),this.canvasTxt.closePath(),this.startY=s.y,this.startX=s.x,this.points.push(s)}},mouseUp:function(t){console.log("结束",t),t=t||event,t.preventDefault();var s={x:t.offsetX,y:t.offsetY};this.canvasTxt.beginPath(),this.canvasTxt.moveTo(this.startX,this.startY),this.canvasTxt.lineTo(s.x,s.y),this.canvasTxt.stroke(),this.canvasTxt.closePath(),this.points.push(s),this.points.push({x:-1,y:-1}),this.isDown=!1},overwrite:function(){this.canvasTxt.clearRect(0,0,this.$refs.canvasF.width,this.$refs.canvasF.height),this.points=[]},commit:function(){this.imgUrl=this.$refs.canvasF.toDataURL(),console.log(this.$refs.canvasF.toDataURL())}}}),o=n,h=(a("8eb9"),a("2877")),c=Object(h["a"])(o,e,i,!1,null,"488a68a4",null);s["default"]=c.exports},"8eb9":function(t,s,a){"use strict";a("9959")},9959:function(t,s,a){}}]);