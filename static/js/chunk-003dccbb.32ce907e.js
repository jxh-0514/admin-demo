(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-003dccbb"],{"083a":function(t,e,n){"use strict";var i=n("0d51"),r=TypeError;t.exports=function(t,e){if(!delete t[e])throw r("Cannot delete property "+i(e)+" of "+i(t))}},"10df":function(t,e,n){"use strict";n("72c2")},"191b":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"chart",staticClass:"chart"})},r=[],a=n("313e"),o=n.n(a),s=n("20ca"),c={name:"LineChart",props:{},data:function(){return{chartInstance:null,resizeHandler:null}},mounted:function(){var t=this;this.initChart(),this.resizeHandler=this.resizeChart,window.addEventListener("resize",(function(){t.resizeChart()}))},beforeDestroy:function(){window.removeEventListener("resize",this.resizeHandler),this.chartInstance&&this.chartInstance.dispose()},methods:{initChart:function(){var t=this;this.chartInstance=o.a.init(this.$refs.chart),console.log("初始化",this.chartInstance),this.chartInstance.showLoading({text:"Loading...",color:"#c23531",textColor:"#fff",maskColor:"rgba(0, 0, 0, 0.5)",zlevel:0}),setTimeout((function(){t.updateChart(),t.chartInstance.hideLoading()}),2e3)},updateChart:function(){var t={title:{text:"大屏数据展示 - 折线图",left:"center",textStyle:{color:"#fff",fontSize:24}},tooltip:{trigger:"axis"},xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],axisLine:{lineStyle:{color:"#fff"}}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#fff"}},splitLine:{lineStyle:{color:"#555"}}},series:[{name:"Sales",type:"line",data:[120,200,150,80,70,110,130],itemStyle:{color:"#3398DB"}}],backgroundColor:"#2c343c"};this.chartInstance.setOption(t)},resizeChart:Object(s["a"])((function(){this.chartInstance&&(console.log("resize",this.chartInstance.id),this.chartInstance.resize())}),500)}},l=c,u=(n("a64f"),n("2877")),h=Object(u["a"])(l,i,r,!1,null,"28b331b6",null);e["a"]=h.exports},"20ca":function(t,e,n){"use strict";function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,n=null;return function(){var i=this,r=arguments;n&&clearTimeout(n),n=setTimeout((function(){t.apply(i,r)}),e)}}n.d(e,"a",(function(){return i}))},"605d6":function(t,e,n){"use strict";n("e953")},"72c2":function(t,e,n){},"91bf":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:6,xl:4,lg:6}},t._l(t.components,(function(e,i){return n("div",{key:i,staticClass:"component-item"},[n("div",{staticClass:"draggable-component",attrs:{draggable:"true"},on:{drag:function(n){return t.onDragStart(e,n)},dragend:function(n){return t.onDragEnd(e)}}},[n("img",{staticClass:"preview-image",attrs:{src:e.previewImage,alt:"Preview"}}),n("p",[t._v(t._s(e.name))])])])})),0),n("el-col",{attrs:{span:18,xl:20,lg:18}},[n("div",{attrs:{id:"content"}},[n("grid-layout",{ref:"gridlayout",attrs:{layout:t.layout,"col-num":12,"row-height":30,"is-draggable":!0,"is-resizable":!0,"vertical-compact":!0,"use-css-transforms":!0},on:{"update:layout":function(e){t.layout=e},"layout-ready":t.layoutReadyEvent}},t._l(t.layout,(function(e){return n("grid-item",{key:e.id,attrs:{x:e.x,y:e.y,w:e.w,h:e.h,i:e.i},on:{resized:t.resizedEvent}},[n(e.i,{ref:"componentRef_"+e.i,refInFor:!0,tag:"component",attrs:{item:e}})],1)})),1)],1)])],1)],1)},r=[],a=(n("c740"),n("b0c0"),n("a434"),n("d3b7"),n("159b"),n("7be8")),o=n("ecf5"),s=n("191b"),c={x:null,y:null},l={x:null,y:null,w:4,h:3,i:null},u={name:"editScreen",components:{GridLayout:a["GridLayout"],GridItem:a["GridItem"],BarChart:o["a"],LineChart:s["a"]},props:{},data:function(){return{layout:[],components:[{name:"BarChart",previewImage:"https://echarts.apache.org/examples/data/thumb/bar-simple.webp?_v_=1724900876815",component:"BarChart",chartType:"bar"},{name:"LineChart",previewImage:"https://echarts.apache.org/examples/data/thumb/line-simple.webp?_v_=1724900876815",component:"LineChart",chartType:"line"}],contentEl:null}},computed:{},watch:{},beforeDestroy:function(){document.removeEventListener("dragover",this.updateMousePosition,!1),window.removeEventListener("resize",this.updateContentElement,!1),this.$store.dispatch("dragScreen/setLayout",this.layout)},created:function(){var t=this.$store.getters.layout;t&&(this.layout=t)},mounted:function(){this.updateContentElement(),document.addEventListener("dragover",this.updateMousePosition,!1),window.addEventListener("resize",this.updateContentElement,!1)},methods:{updateContentElement:function(){this.contentEl=document.getElementById("content")},updateMousePosition:function(t){c.x=t.clientX,c.y=t.clientY},isMouseInGrid:function(){var t=this.contentEl.getBoundingClientRect();return c.x>t.left&&c.x<t.right&&c.y>t.top&&c.y<t.bottom},onDragStart:function(t,e){var n=this.contentEl.getBoundingClientRect(),i=this.layout.findIndex((function(e){return e.i===t.name}));-1!==i&&(console.log("有相同组件---",i),this.layout.splice(i,1));var r=e.clientX-n.left,a=e.clientY-n.top;if(this.isMouseInGrid()&&!this.layout.some((function(e){return e.i===t.name}))){var o=Math.floor(r/n.width*(this.colNum||12)),s=Math.floor(a/n.height*(this.colNum||12));this.layout.push({x:o,y:s,w:4,h:3,i:t.name,config:t})}var u=this.layout.findIndex((function(e){return e.i===t.name}));if(-1!==u){try{this.$refs.gridlayout.$children[u].$refs.item.style.display="none"}catch(d){}this.$refs.gridlayout.$children[u].dragging={top:c.y-this.contentEl.getBoundingClientRect().top,left:c.x-this.contentEl.getBoundingClientRect().left};var h=this.$refs.gridlayout.$children[u].calcXY(c.y-this.contentEl.getBoundingClientRect().top,c.x-this.contentEl.getBoundingClientRect().left);this.isMouseInGrid()?(this.$refs.gridlayout.dragEvent("dragstart",t.name,h.x,h.y,2,2),l={i:t.name,x:this.layout[u].x,y:this.layout[u].y,config:t}):(l={i:null,x:null,y:null,w:2,h:2},this.$refs.gridlayout.dragEvent("dragend",t.name,h.x,h.y,2,2),this.layout.splice(u,1))}},onDragEnd:function(t){if(this.isMouseInGrid()){var e=l,n=e.x,i=e.y,r=e.w,a=e.h,o=e.i,s=e.config;this.layout.some((function(t){return t.i===o}))||this.layout.push({x:n,y:i,w:r,h:a,i:o,config:s});try{this.$refs.gridlayout.$children[this.layout.length-1].$refs.item.style.display="block"}catch(c){}this.$refs["componentRef_".concat(o)][0].resizeChart(),console.log("拖拽结束---",this.layout)}},resizedEvent:function(t){console.log("调整大小---",t,this.layout),this.$refs["componentRef_".concat(t)][0].resizeChart()},layoutReadyEvent:function(){var t=this;this.$nextTick((function(){t.layout.length>0&&t.layout.forEach((function(e){t.$refs["componentRef_".concat(e.i)][0].resizeChart()}))}))}}},h=u,d=(n("10df"),n("2877")),f=Object(d["a"])(h,i,r,!1,null,"aa6d9d84",null);e["default"]=f.exports},9204:function(t,e,n){},a434:function(t,e,n){"use strict";var i=n("23e7"),r=n("7b0b"),a=n("23cb"),o=n("5926"),s=n("07fa"),c=n("3511"),l=n("65f0"),u=n("8418"),h=n("083a"),d=n("1dde"),f=d("splice"),y=Math.max,g=Math.min;i({target:"Array",proto:!0,forced:!f},{splice:function(t,e){var n,i,d,f,p,m,v=r(this),x=s(v),C=a(t,x),b=arguments.length;for(0===b?n=i=0:1===b?(n=0,i=x-C):(n=b-2,i=g(y(o(e),0),x-C)),c(x+n-i),d=l(v,i),f=0;f<i;f++)p=C+f,p in v&&u(d,f,v[p]);if(d.length=i,n<i){for(f=C;f<x-i;f++)p=f+i,m=f+n,p in v?v[m]=v[p]:h(v,m);for(f=x;f>x-i+n;f--)h(v,f-1)}else if(n>i)for(f=x-i;f>C;f--)p=f+i-1,m=f+n-1,p in v?v[m]=v[p]:h(v,m);for(f=0;f<n;f++)v[f+C]=arguments[f+2];return v.length=x-i+n,d}})},a64f:function(t,e,n){"use strict";n("9204")},c740:function(t,e,n){"use strict";var i=n("23e7"),r=n("b727").findIndex,a=n("44d2"),o="findIndex",s=!0;o in[]&&Array(1)[o]((function(){s=!1})),i({target:"Array",proto:!0,forced:s},{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),a(o)},e953:function(t,e,n){},ecf5:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"chart",staticClass:"chart"})},r=[],a=n("313e"),o=n.n(a),s=n("20ca"),c={name:"BarChart",props:{},data:function(){return{chartInstance:null,resizeHandler:null}},mounted:function(){var t=this;this.initChart(),this.resizeHandler=this.resizeChart,window.addEventListener("resize",(function(){t.resizeChart()}))},beforeDestroy:function(){window.removeEventListener("resize",this.resizeHandler),this.chartInstance&&this.chartInstance.dispose()},methods:{initChart:function(){var t=this;this.chartInstance=o.a.init(this.$refs.chart),console.log("初始化",this.chartInstance),this.chartInstance.showLoading({text:"Loading...",color:"#c23531",textColor:"#fff",maskColor:"rgba(0, 0, 0, 0.5)",zlevel:0}),setTimeout((function(){t.updateChart(),t.chartInstance.hideLoading()}),2e3)},updateChart:function(){var t={title:{text:"大屏数据展示 - 柱状图",left:"center",textStyle:{color:"#fff",fontSize:24}},tooltip:{trigger:"axis"},xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],axisLine:{lineStyle:{color:"#fff"}}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#fff"}},splitLine:{lineStyle:{color:"#555"}}},series:[{name:"Sales",type:"bar",data:[120,200,150,80,70,110,130],itemStyle:{color:"#3398DB"}}],backgroundColor:"#2c343c"};this.chartInstance.setOption(t)},resizeChart:Object(s["a"])((function(){this.chartInstance&&(console.log("resize",this.chartInstance.id),this.chartInstance.resize())}),500)}},l=c,u=(n("605d6"),n("2877")),h=Object(u["a"])(l,i,r,!1,null,"3aa2cb2c",null);e["a"]=h.exports}}]);