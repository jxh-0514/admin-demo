(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-09586926"],{"582f":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"container"},on:{mousemove:e.mouseMove}})},i=[],r=n("2909"),c=(n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("99af"),n("159b"),n("d81d"),n("caad"),n("2532"),n("b0c0"),n("14d9"),n("5a89")),o=n("4721"),s=n("34ad"),l={data:function(){return{mesh:null,camera:null,scene:null,renderer:null,controls:null,animationId:null,public:"",maps:null,cabinets:[],curCabinet:""}},beforeDestroy:function(){cancelAnimationFrame(this.animationId)},mounted:function(){this.maps=new Map,this.crtTexture("cabinet-hover.jpg"),this.init()},methods:{init:function(){this.createScene(),this.loadGLTF(),this.createCamera(),this.createRender(),this.createControls(),this.render()},createScene:function(){this.scene=new c["eb"]},loadGLTF:function(){var e=this,t=new s["a"];t.load("".concat(this.public,"models_room/machineRoom.gltf"),(function(t){var n,a,i=t.scene.children;(n=console).log.apply(n,["children"].concat(Object(r["a"])(i))),i.forEach((function(t){var n=t.material,a=n.map,i=n.color;e.changeMat(t,a,i),t.name.includes("cabinet")&&e.cabinets.push(t)})),(a=e.scene).add.apply(a,Object(r["a"])(i))}))},createLight:function(){var e=new c["a"](16777215,.1);this.scene.add(e);var t=new c["jb"](16777215);t.position.set(150,150,150),t.castShadow=!0,this.scene.add(t)},createCamera:function(){var e=document.getElementById("container"),t=e.clientWidth,n=e.clientHeight,a=t/n;this.camera=new c["V"](45,a,.1,1e3),this.camera.position.set(0,10,15),this.camera.lookAt(0,0,0),this.scene.add(this.camera)},createRender:function(){var e=document.getElementById("container");this.renderer=new c["tb"]({antialias:!0,alpha:!0}),this.renderer.setSize(e.clientWidth,e.clientHeight),this.renderer.setClearColor(4144959,1),e.appendChild(this.renderer.domElement)},createControls:function(){this.controls=new o["a"](this.camera,this.renderer.domElement)},render:function(){this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.render)},changeMat:function(e,t,n){e.material=t?new c["K"]({map:this.crtTexture(t.name)}):new c["K"]({color:n})},crtTexture:function(e){var t=this.maps.get(e);return t||(t=(new c["nb"]).load("".concat(this.public,"models_room/").concat(e)),t.flipY=!1,t.wrapS=1e3,t.wrapT=1e3,this.maps.set(e,t)),t},selectCabinet:function(e,t){var n=this.cabinets,a=this.renderer,i=this.camera,r=this.maps,o=this.curCabinet,s=a.domElement,l=s.width,h=s.height,u=new c["cb"],m=new c["qb"];m.set(e/l*2-1,-t/h*2+1),u.setFromCamera(m,i);var d=u.intersectObjects(n)[0],b=d?d.object:null;if(o&&o!==b){var f=o.material;f.setValues({map:r.get("cabinet.jpg")})}if(b){if(this.onMouseMoveCabinet(e,t),b!==o){this.curCabinet=b;var p=b.material;p.setValues({map:r.get("cabinet-hover.jpg")}),this.onMouseOverCabinet(b)}}else o&&(this.curCabinet=null,this.onMouseOutCabinet())},mouseMove:function(e){var t=e.clientX,n=e.clientY;this.selectCabinet(t,n)},onMouseOverCabinet:function(e){console.log(e)},onMouseMoveCabinet:function(e,t){console.log(e,t)},onMouseOutCabinet:function(){},animate:function(){this.animationId=requestAnimationFrame(this.animate),console.log(this.animate,"132"),mesh.rotation.x+=.01,mesh.rotation.y+=.02,renderer.render(scene,camera)}}},h=l,u=(n("a133"),n("2877")),m=Object(u["a"])(h,a,i,!1,null,"5866ac43",null);t["default"]=m.exports},a133:function(e,t,n){"use strict";n("a5a1")},a5a1:function(e,t,n){}}]);