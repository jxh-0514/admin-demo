(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2fffdbc6"],{"0495":function(t,a,n){},2186:function(t,a,n){t.exports=n.p+"static/img/gdjx.f908671b.png"},"332c":function(t,a,n){"use strict";function e(t,a,n,e){var i=0;if(t/a>=n/e)if(t>n){var r=t/n;i=r>1.4?-Math.round(r-1):-Math.round(r),console.log("1111-----",i,r)}else{var s=n/t;i=s>1.4?-Math.round(s-1):-Math.round(s),console.log("2222-----",i,s)}else if(a>e){var o=a/e;i=-Math.round(o-1),console.log("33333-----",i,o)}else{var l=e/a;i=-Math.round(l-1),console.log("4444-----",i,l)}return i}n.d(a,"a",(function(){return e}))},"763b":function(t,a,n){"use strict";n("0495")},b930:function(t,a,n){var e,i,r;n("d9e2"),function(s,o,l){t.exports?t.exports=l(n("e2ae"),n("e11e")):(i=[n("e2ae"),n("e11e")],e=l,r="function"===typeof e?e.apply(a,i):e,void 0===r||(t.exports=r))}(0,0,(function(t,a){"use strict";"undefined"===typeof a.Layer&&(a.Layer=a.Class);var n=a.Layer.extend({initialize:function(t){this.cfg=t,this._el=a.DomUtil.create("div","leaflet-zoom-hide"),this._data=[],this._max=1,this._min=0,this.cfg.container=this._el},onAdd:function(n){var e=n.getSize();this._map=n,this._width=e.x,this._height=e.y,this._el.style.width=e.x+"px",this._el.style.height=e.y+"px",this._el.style.position="absolute",this._origin=this._map.layerPointToLatLng(new a.Point(0,0)),n.getPanes().overlayPane.appendChild(this._el),this._heatmap||(this._heatmap=t.create(this.cfg)),n.on("moveend",this._reset,this),this._draw()},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._el),t.off("moveend",this._reset,this)},_draw:function(){if(this._map){var t=this._map.getPanes().mapPane,a=t._leaflet_pos;this._el.style[n.CSS_TRANSFORM]="translate("+-Math.round(a.x)+"px,"+-Math.round(a.y)+"px)",this._update()}},_update:function(){var t,a,n,e={max:this._max,min:this._min,data:[]};if(t=this._map.getBounds(),a=this._map.getZoom(),n=Math.pow(2,a),0!=this._data.length){var i=[],r=this.cfg.scaleRadius?n:1,s=0,o=0,l=this.cfg.valueField,h=this._data.length;while(h--){var u=this._data[h],c=u[l],d=u.latlng;if(t.contains(d)){s=Math.max(c,s),o=Math.min(c,o);var g,_=this._map.latLngToContainerPoint(d),m={x:Math.round(_.x),y:Math.round(_.y)};m[l]=c,g=u.radius?u.radius*r:(this.cfg.radius||2)*r,m.radius=g,i.push(m)}}this.cfg.useLocalExtrema&&(e.max=s,e.min=o),e.data=i,this._heatmap.setData(e)}else this._heatmap&&this._heatmap.setData(e)},setData:function(t){this._max=t.max||this._max,this._min=t.min||this._min;var n=this.cfg.latField||"lat",e=this.cfg.lngField||"lng",i=this.cfg.valueField||"value",r=(t=t.data,t.length),s=[];while(r--){var o=t[r],l=new a.LatLng(o[n],o[e]),h={latlng:l};h[i]=o[i],o.radius&&(h.radius=o.radius),s.push(h)}this._data=s,this._draw()},addData:function(t){if(t.length>0){var n=t.length;while(n--)this.addData(t[n])}else{var e=this.cfg.latField||"lat",i=this.cfg.lngField||"lng",r=this.cfg.valueField||"value",s=t,o=new a.LatLng(s[e],s[i]),l={latlng:o};l[r]=s[r],this._max=Math.max(this._max,l[r]),this._min=Math.min(this._min,l[r]),s.radius&&(l.radius=s.radius),this._data.push(l),this._draw()}},_reset:function(){this._origin=this._map.layerPointToLatLng(new a.Point(0,0));var t=this._map.getSize();this._width===t.x&&this._height===t.y||(this._width=t.x,this._height=t.y,this._el.style.width=this._width+"px",this._el.style.height=this._height+"px",this._heatmap._renderer.setDimensions(this._width,this._height)),this._draw()}});return n.CSS_TRANSFORM=function(){for(var t=document.createElement("div"),a=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],n=0;n<a.length;n++){var e=a[n];if(void 0!==t.style[e])return e}return a[0]}(),n}))},d3dd:function(t,a,n){"use strict";n.r(a);var e=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",[n("div",{attrs:{id:"map"}}),n("el-button",{attrs:{type:"primary"},on:{click:t.getData}},[t._v("刷新")])],1)},i=[],r=(n("d81d"),n("e11e")),s=n.n(r),o=n("b930"),l=n.n(o),h=n("332c"),u={data:function(){return{heatmapLayer:null,map:null,testData:{max:8,data:[{lat:24.6408,lng:46.7728,count:3},{lat:50.75,lng:-1.55,count:1},{lat:52.6333,lng:1.75,count:1},{lat:48.15,lng:9.4667,count:1},{lat:52.35,lng:4.9167,count:2},{lat:60.8,lng:11.1,count:1},{lat:43.561,lng:-116.214,count:1},{lat:47.5036,lng:-94.685,count:1},{lat:42.1818,lng:-71.1962,count:1},{lat:42.0477,lng:-74.1227,count:1},{lat:40.0326,lng:-75.719,count:1},{lat:40.7128,lng:-73.2962,count:2},{lat:27.9003,lng:-82.3024,count:1},{lat:38.2085,lng:-85.6918,count:1},{lat:46.8159,lng:-100.706,count:1},{lat:30.5449,lng:-90.8083,count:1},{lat:44.735,lng:-89.61,count:1},{lat:41.4201,lng:-75.6485,count:2},{lat:39.4209,lng:-74.4977,count:1},{lat:39.7437,lng:-104.979,count:1},{lat:39.5593,lng:-105.006,count:1},{lat:45.2673,lng:-93.0196,count:1},{lat:41.1215,lng:-89.4635,count:1},{lat:43.4314,lng:-83.9784,count:1},{lat:43.7279,lng:-86.284,count:1},{lat:40.7168,lng:-73.9861,count:1},{lat:47.7294,lng:-116.757,count:1},{lat:47.7294,lng:-116.757,count:2},{lat:35.5498,lng:-118.917,count:1},{lat:34.1568,lng:-118.523,count:1},{lat:39.501,lng:-87.3919,count:3},{lat:33.5586,lng:-112.095,count:1},{lat:38.757,lng:-77.1487,count:1},{lat:33.223,lng:-117.107,count:1},{lat:30.2316,lng:-85.502,count:1},{lat:39.1703,lng:-75.5456,count:8},{lat:30.0041,lng:-95.2984,count:2},{lat:29.7755,lng:-95.4152,count:1},{lat:41.8014,lng:-87.6005,count:1},{lat:37.8754,lng:-121.687,count:7},{lat:38.4493,lng:-122.709,count:1},{lat:40.5494,lng:-89.6252,count:1},{lat:42.6105,lng:-71.2306,count:1},{lat:40.0973,lng:-85.671,count:1},{lat:40.3987,lng:-86.8642,count:1},{lat:40.4224,lng:-86.8031,count:4},{lat:47.2166,lng:-122.451,count:1},{lat:32.2369,lng:-110.956,count:1},{lat:41.3969,lng:-87.3274,count:2},{lat:41.7364,lng:-89.7043,count:2},{lat:42.3425,lng:-71.0677,count:1},{lat:33.8042,lng:-83.8893,count:1},{lat:36.6859,lng:-121.629,count:2},{lat:41.0957,lng:-80.5052,count:1},{lat:46.8841,lng:-123.995,count:1},{lat:40.2851,lng:-75.9523,count:2},{lat:42.4235,lng:-85.3992,count:1},{lat:39.7437,lng:-104.979,count:2},{lat:25.6586,lng:-80.3568,count:7},{lat:33.0975,lng:-80.1753,count:1},{lat:25.7615,lng:-80.2939,count:1},{lat:26.3739,lng:-80.1468,count:1},{lat:37.6454,lng:-84.8171,count:1},{lat:34.2321,lng:-77.8835,count:1},{lat:34.6774,lng:-82.928,count:1},{lat:39.9744,lng:-86.0779,count:1},{lat:35.6784,lng:-97.4944,count:2},{lat:33.5547,lng:-84.1872,count:1},{lat:27.2498,lng:-80.3797,count:1},{lat:41.4789,lng:-81.6473,count:1},{lat:41.813,lng:-87.7134,count:1},{lat:41.8917,lng:-87.9359,count:1},{lat:35.0911,lng:-89.651,count:1},{lat:32.6102,lng:-117.03,count:1},{lat:41.758,lng:-72.7444,count:1},{lat:39.8062,lng:-86.1407,count:1},{lat:41.872,lng:-88.1662,count:1},{lat:34.1404,lng:-81.3369,count:1},{lat:46.15,lng:-60.1667,count:1},{lat:36.0679,lng:-86.7194,count:1},{lat:43.45,lng:-80.5,count:1},{lat:44.3833,lng:-79.7,count:1},{lat:45.4167,lng:-75.7,count:2},{lat:43.75,lng:-79.2,count:2},{lat:45.2667,lng:-66.0667,count:3},{lat:42.9833,lng:-81.25,count:2},{lat:44.25,lng:-79.4667,count:3},{lat:45.2667,lng:-66.0667,count:2},{lat:34.3667,lng:-118.478,count:3},{lat:42.734,lng:-87.8211,count:1},{lat:39.9738,lng:-86.1765,count:1},{lat:33.7438,lng:-117.866,count:1},{lat:37.5741,lng:-122.321,count:1},{lat:42.2843,lng:-85.2293,count:1},{lat:34.6574,lng:-92.5295,count:1},{lat:41.4881,lng:-87.4424,count:1},{lat:25.72,lng:-80.2707,count:1},{lat:34.5873,lng:-118.245,count:1},{lat:35.8278,lng:-78.6421,count:1}]},cfg:{radius:20,maxOpacity:.8,scaleRadius:!1,useLocalExtrema:!0,latField:"lat",lngField:"lng",valueField:"count"},bounds:[[0,0],[697,542]],center:[350,270],crs:s.a.CRS.Simple,mapUrl:n("2186"),windowWidth:"",windowHeight:"",imageOverLay:null}},watch:{},created:function(){this.windowWidth=document.documentElement.clientWidth-240||document.body.clientWidth-240,this.windowHeight=document.documentElement.clientHeight-50||document.body.clientHeight-50},mounted:function(){this.initLeaflet()},methods:{init:function(){var t=s.a.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://cloudmade.com">CloudMade</a>',maxZoom:18});this.heatmapLayer=new l.a(this.cfg),this.map=new s.a.Map("map",{center:new s.a.LatLng(25.6586,-80.3568),zoom:4,layers:[t,this.heatmapLayer]}),this.heatmapLayer.setData(this.testData)},initLeaflet:function(){this.heatmapLayer=new l.a(this.cfg),this.map=s.a.map("map",{center:this.center,crs:this.crs,zoomControl:!1,zoom:1,minZoom:-6,doubleClickZoom:!1,attributionControl:!1}),this.getData(),this.initImage()},initImage:function(){var t=this.mapUrl,a=Object(h["a"])(this.bounds[1][0],this.bounds[1][1],this.windowWidth,this.windowHeight);this.map.setView([this.bounds[1][0]/2,this.bounds[1][1]/2],a),this.imageOverLay=s.a.imageOverlay(t,this.bounds,{interactive:!0}).addTo(this.map),this.imageOverLay.bringToBack()},getData:function(){for(var t=[],a=0;a<100;a++){var n=0,e=697,i=Math.floor(Math.random()*(e-n+1))+n,r=Math.floor(Math.random()*(e-n+1))+n,s=Math.floor(1e3*Math.random());t.push({lat:i,lng:r,count:s})}var o={max:8,data:t};this.heatmapLayer.setData(o),this.heatmapLayer.addTo(this.map)}}},c=u,d=(n("763b"),n("2877")),g=Object(d["a"])(c,e,i,!1,null,"a0e9d370",null);a["default"]=g.exports},e2ae:function(t,a,n){var e,i;(function(r,s,o){t.exports?t.exports=o():(e=o,i="function"===typeof e?e.call(a,n,a,t):e,void 0===i||(t.exports=i))})(0,0,(function(){var t={defaultRadius:40,defaultRenderer:"canvas2d",defaultGradient:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},defaultMaxOpacity:1,defaultMinOpacity:0,defaultBlur:.85,defaultXField:"x",defaultYField:"y",defaultValueField:"value",plugins:{}},a=function(){var a=function(t){this._coordinator={},this._data=[],this._radi=[],this._min=10,this._max=1,this._xField=t["xField"]||t.defaultXField,this._yField=t["yField"]||t.defaultYField,this._valueField=t["valueField"]||t.defaultValueField,t["radius"]&&(this._cfgRadius=t["radius"])},n=t.defaultRadius;return a.prototype={_organiseData:function(t,a){var e=t[this._xField],i=t[this._yField],r=this._radi,s=this._data,o=this._max,l=this._min,h=t[this._valueField]||1,u=t.radius||this._cfgRadius||n;s[e]||(s[e]=[],r[e]=[]),s[e][i]?s[e][i]+=h:(s[e][i]=h,r[e][i]=u);var c=s[e][i];return c>o?(a?this.setDataMax(c):this._max=c,!1):c<l?(a?this.setDataMin(c):this._min=c,!1):{x:e,y:i,value:h,radius:u,min:l,max:o}},_unOrganizeData:function(){var t=[],a=this._data,n=this._radi;for(var e in a)for(var i in a[e])t.push({x:e,y:i,radius:n[e][i],value:a[e][i]});return{min:this._min,max:this._max,data:t}},_onExtremaChange:function(){this._coordinator.emit("extremachange",{min:this._min,max:this._max})},addData:function(){if(arguments[0].length>0){var t=arguments[0],a=t.length;while(a--)this.addData.call(this,t[a])}else{var n=this._organiseData(arguments[0],!0);n&&(0===this._data.length&&(this._min=this._max=n.value),this._coordinator.emit("renderpartial",{min:this._min,max:this._max,data:[n]}))}return this},setData:function(t){var a=t.data,n=a.length;this._data=[],this._radi=[];for(var e=0;e<n;e++)this._organiseData(a[e],!1);return this._max=t.max,this._min=t.min||0,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},removeData:function(){},setDataMax:function(t){return this._max=t,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setDataMin:function(t){return this._min=t,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setCoordinator:function(t){this._coordinator=t},_getInternalData:function(){return{max:this._max,min:this._min,data:this._data,radi:this._radi}},getData:function(){return this._unOrganizeData()}},a}(),n=function(){var t=function(t){var a=t.gradient||t.defaultGradient,n=document.createElement("canvas"),e=n.getContext("2d");n.width=256,n.height=1;var i=e.createLinearGradient(0,0,256,1);for(var r in a)i.addColorStop(r,a[r]);return e.fillStyle=i,e.fillRect(0,0,256,1),e.getImageData(0,0,256,1).data},a=function(t,a){var n=document.createElement("canvas"),e=n.getContext("2d"),i=t,r=t;if(n.width=n.height=2*t,1==a)e.beginPath(),e.arc(i,r,t,0,2*Math.PI,!1),e.fillStyle="rgba(0,0,0,1)",e.fill();else{var s=e.createRadialGradient(i,r,t*a,i,r,t);s.addColorStop(0,"rgba(0,0,0,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),e.fillStyle=s,e.fillRect(0,0,2*t,2*t)}return n},n=function(t){var a=[],n=t.min,e=t.max,i=t.radi,r=(t=t.data,Object.keys(t)),s=r.length;while(s--){var o=r[s],l=Object.keys(t[o]),h=l.length;while(h--){var u=l[h],c=t[o][u],d=i[o][u];a.push({x:o,y:u,value:c,radius:d})}}return{min:n,max:e,data:a}};function e(a){var n=a.container,e=this.shadowCanvas=document.createElement("canvas"),i=this.canvas=a.canvas||document.createElement("canvas"),r=(this._renderBoundaries=[1e4,1e4,0,0],getComputedStyle(a.container)||{});i.className="heatmap-canvas",this._width=i.width=e.width=a.width||+r.width.replace(/px/,""),this._height=i.height=e.height=a.height||+r.height.replace(/px/,""),this.shadowCtx=e.getContext("2d"),this.ctx=i.getContext("2d"),i.style.cssText=e.style.cssText="position:absolute;left:0;top:0;",n.style.position="relative",n.appendChild(i),this._palette=t(a),this._templates={},this._setStyles(a)}return e.prototype={renderPartial:function(t){t.data.length>0&&(this._drawAlpha(t),this._colorize())},renderAll:function(t){this._clear(),t.data.length>0&&(this._drawAlpha(n(t)),this._colorize())},_updateGradient:function(a){this._palette=t(a)},updateConfig:function(t){t["gradient"]&&this._updateGradient(t),this._setStyles(t)},setDimensions:function(t,a){this._width=t,this._height=a,this.canvas.width=this.shadowCanvas.width=t,this.canvas.height=this.shadowCanvas.height=a},_clear:function(){this.shadowCtx.clearRect(0,0,this._width,this._height),this.ctx.clearRect(0,0,this._width,this._height)},_setStyles:function(t){this._blur=0==t.blur?0:t.blur||t.defaultBlur,t.backgroundColor&&(this.canvas.style.backgroundColor=t.backgroundColor),this._width=this.canvas.width=this.shadowCanvas.width=t.width||this._width,this._height=this.canvas.height=this.shadowCanvas.height=t.height||this._height,this._opacity=255*(t.opacity||0),this._maxOpacity=255*(t.maxOpacity||t.defaultMaxOpacity),this._minOpacity=255*(t.minOpacity||t.defaultMinOpacity),this._useGradientOpacity=!!t.useGradientOpacity},_drawAlpha:function(t){var n=this._min=t.min,e=this._max=t.max,i=(t=t.data||[],t.length),r=1-this._blur;while(i--){var s,o=t[i],l=o.x,h=o.y,u=o.radius,c=Math.min(o.value,e),d=l-u,g=h-u,_=this.shadowCtx;this._templates[u]?s=this._templates[u]:this._templates[u]=s=a(u,r);var m=(c-n)/(e-n);_.globalAlpha=m<.01?.01:m,_.drawImage(s,d,g),d<this._renderBoundaries[0]&&(this._renderBoundaries[0]=d),g<this._renderBoundaries[1]&&(this._renderBoundaries[1]=g),d+2*u>this._renderBoundaries[2]&&(this._renderBoundaries[2]=d+2*u),g+2*u>this._renderBoundaries[3]&&(this._renderBoundaries[3]=g+2*u)}},_colorize:function(){var t=this._renderBoundaries[0],a=this._renderBoundaries[1],n=this._renderBoundaries[2]-t,e=this._renderBoundaries[3]-a,i=this._width,r=this._height,s=this._opacity,o=this._maxOpacity,l=this._minOpacity,h=this._useGradientOpacity;t<0&&(t=0),a<0&&(a=0),t+n>i&&(n=i-t),a+e>r&&(e=r-a);for(var u=this.shadowCtx.getImageData(t,a,n,e),c=u.data,d=c.length,g=this._palette,_=3;_<d;_+=4){var m,f=c[_],p=4*f;if(p)m=s>0?s:f<o?f<l?l:f:o,c[_-3]=g[p],c[_-2]=g[p+1],c[_-1]=g[p+2],c[_]=h?g[p+3]:m}u.data=c,this.ctx.putImageData(u,t,a),this._renderBoundaries=[1e3,1e3,0,0]},getValueAt:function(t){var a,n=this.shadowCtx,e=n.getImageData(t.x,t.y,1,1),i=e.data[3],r=this._max,s=this._min;return a=Math.abs(r-s)*(i/255)>>0,a},getDataURL:function(){return this.canvas.toDataURL()}},e}(),e=function(){var a=!1;return"canvas2d"===t["defaultRenderer"]&&(a=n),a}(),i={merge:function(){for(var t={},a=arguments.length,n=0;n<a;n++){var e=arguments[n];for(var i in e)t[i]=e[i]}return t}},r=function(){var n=function(){function t(){this.cStore={}}return t.prototype={on:function(t,a,n){var e=this.cStore;e[t]||(e[t]=[]),e[t].push((function(t){return a.call(n,t)}))},emit:function(t,a){var n=this.cStore;if(n[t])for(var e=n[t].length,i=0;i<e;i++){var r=n[t][i];r(a)}}},t}(),r=function(t){var a=t._renderer,n=t._coordinator,e=t._store;n.on("renderpartial",a.renderPartial,a),n.on("renderall",a.renderAll,a),n.on("extremachange",(function(a){t._config.onExtremaChange&&t._config.onExtremaChange({min:a.min,max:a.max,gradient:t._config["gradient"]||t._config["defaultGradient"]})})),e.setCoordinator(n)};function s(){var s=this._config=i.merge(t,arguments[0]||{});if(this._coordinator=new n,s["plugin"]){var o=s["plugin"];if(!t.plugins[o])throw new Error("Plugin '"+o+"' not found. Maybe it was not registered.");var l=t.plugins[o];this._renderer=new l.renderer(s),this._store=new l.store(s)}else this._renderer=new e(s),this._store=new a(s);r(this)}return s.prototype={addData:function(){return this._store.addData.apply(this._store,arguments),this},removeData:function(){return this._store.removeData&&this._store.removeData.apply(this._store,arguments),this},setData:function(){return this._store.setData.apply(this._store,arguments),this},setDataMax:function(){return this._store.setDataMax.apply(this._store,arguments),this},setDataMin:function(){return this._store.setDataMin.apply(this._store,arguments),this},configure:function(t){return this._config=i.merge(this._config,t),this._renderer.updateConfig(this._config),this._coordinator.emit("renderall",this._store._getInternalData()),this},repaint:function(){return this._coordinator.emit("renderall",this._store._getInternalData()),this},getData:function(){return this._store.getData()},getDataURL:function(){return this._renderer.getDataURL()},getValueAt:function(t){return this._store.getValueAt?this._store.getValueAt(t):this._renderer.getValueAt?this._renderer.getValueAt(t):null}},s}(),s={create:function(t){return new r(t)},register:function(a,n){t.plugins[a]=n}};return s}))}}]);