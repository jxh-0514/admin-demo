<!DOCTYPE html>
<html>

<head lang="en">
    <meta charset="UTF-8">
    <title>张天师“阳平治都功”螭龙纽白玉印</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" href="../css/list_3d.css">


    <style>
        html {
            width: 100%;
            height: 100%
        }

        body {
            width: 100%;
            height: 100%;
            background: url(de_zhou/222.jpg) no-repeat;
            background-size: cover;
            margin: 0;
            overflow: hidden;
        }

        #div2 {
            color: #858585;
            display: block;
            width: 100%;
            bottom: 10px;
            position: absolute;
            text-align: center;
            font-size: 10px;
            z-index: 1002;
        }
    </style>

</head>

<body>
    <div id="loadbar">
        <span id="bar"></span>
    </div>
    <div class="list">
        <div class="but"></div>
        <div class="jianjie"></div>
        <div class="zhuanti"></div>
        <div class="code"></div>
    </div>
    <div class="list-des">
        <div class="des-top">张天师“阳平治都功”螭龙纽白玉印</div>
        <div class="des">
            <p>元（公元1271－1368年）</p>
            <p>边长12.3厘米、通高6.4厘米</p>
            <p>1952年江西省贵溪县人民政府移交，江西省博物馆藏</p>
            <p>青白玉质，洁白莹润。印钮为一蹲踞触角螭龙，翻唇露齿，眉须后拂，腿毛翻卷长飘，尾作分丫鱼尾状，雕琢精细，生动传神；印面阳文九叠篆体六字“阳平治都功印”，印文线条流畅，结构严谨。这枚玉印是世代天师嗣教的法印，天师府道士上章及表奏符压皆用之。
                据考证，印文“阳平”指四川省青林县阳平山，居道教“二十四治”管理中心之首；“治”是道家从事法事活动的场所；
                “都功”为治中职事，即道教的首领。</p>
        </div>
        <audio id="voice" src="../music/54.张天师“阳平治都功”螭龙纽白玉印（3D）.mp3"></audio>
    </div>
    <div class="list-code">
        <img src="../code/code3d7.png" alt="">
        <span>扫一扫</span>
    </div>
    <div class="list-zhuanti">
        <div class="huizhezhao">返回首页</div>
        <iframe name="myiframe" id="myrame"
            src="http://gdzt.chaoxing.com/gede/model/vertical/info.html?id=203983488&arg=1" frameborder="0" width="100%"
            height="100%">
        </iframe>
        <iframe name="myiframe" id="myrameapp" src="https://special.rhky.com/mobile/mooc/tocourse/203983488?appid=1000"
            frameborder="0" width="100%" height="100%">
            <p>你的浏览器不支持iframe标签</p>
        </iframe>
    </div>
    <script src="js01/three.js"></script>
    <script src="js01/TrackballControls.js"></script>
    <script src="js01/PDBLoader.js"></script>
    <script src="js01/CSS2DRenderer.js"></script>
    <script src="js01/Detector.js"></script>
    <script src="js01/OBJLoader.js"></script>
    <script src="js01/jquery-3.1.1.min.js"></script>
    <script src="../js/CXJSBridge.js"></script>
    <script src="../js/homepage.js"></script>
    <script src="../js/list.js"></script>
    <script>

        function showtip(obj) {
            $('#msg').html($(obj).html())
                .css({
                    top: $(obj).offset().top - $(obj).closest('body').scrollTop() + 'px',
                    left: $(obj).offset().left + 'px'
                }).show();
        }
    </script>
    <!--<audio id="music2" src="de_zhou/cpm_01.mp3" autoplay ></audio>
        <a class="a" href="javascript:playPause();"><img  class="img" src="de_zhou/play.png" id="music_btn2"></a>-->

    <script>

        var camera, scene, renderer;
        var controls;
        var loader = new THREE.PDBLoader();
        var tex = 'de_zhou/0008702.jpg';
        var mesh = 'de_zhou/0008702_M.obj';
        var scale1 = 0.8;
        var PLight1 = 0.1;
        var Alight1 = 1;

        var system = {};
        var p = navigator.platform;
        system.win = p.indexOf("Win") == 0;
        system.mac = p.indexOf("Mac") == 0;
        system.x11 = (p == "X11") || (p.indexOf("Linux") == 0);
        if (system.win || system.mac || system.x11) {
            tex = "de_zhou/0008702.jpg";
        } else {
            tex = "de_zhou/0008702_X.jpg";
        }

        init();
        animate();

        function init() {
            //��������
            scene = new THREE.Scene();
            //���������
            camera = new THREE.PerspectiveCamera(35, window.innerWidth / window.innerHeight, 1, 10000);
            camera.position.z = 250;
            scene.add(camera);

            //灯光
            var directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);
            directionalLight.position = camera.position;
            //��ӵƹ⵽����
            //scene.add(directionalLight);
            var ambientLight = new THREE.AmbientLight(0xffffff, Alight1);

            scene.add(ambientLight);
            var hemiLight = new THREE.HemisphereLight(0xffffff, 0xffffff, 0.8);
            //hemiLight.position.set(0,500,0);
            //scene.add(hemiLight);
            var pointLight = new THREE.PointLight(0xffffff, PLight1);
            pointLight.position.set(-300, 0, -100);
            scene.add(pointLight);
            var pointLight1 = new THREE.PointLight(0xffffff, PLight1);
            pointLight1.position.set(100, 0, 300);
            scene.add(pointLight1);
            var pointLight2 = new THREE.PointLight(0xffffff, PLight1);
            pointLight2.position.set(300, 0, -300);
            scene.add(pointLight2);
            var pointLight4 = new THREE.PointLight(0xffffff, PLight1);
            pointLight4.position.set(0, -300, 0);
            //scene.add(pointLight4);
            //����������ͼ
            var manager = new THREE.LoadingManager();
            manager.onProgress = function (item, loaded, total) {
                console.log(item, loaded, total)

                console.log('@@@@@@' + loaded / total);
                if (loaded == total) {
                    console.log('@@@@@@1加进度条');
                };
            };
            //加载进度
            var onProgress = function (xhr) {
                if (xhr.lengthComputable) {
                    //setInterval(1000);
                    var percentComplete = xhr.loaded / xhr.total * 100;
                    console.log(percentComplete)
                    var percent = document.getElementById("bar");
                    var speed = Math.round(percentComplete, 2);
                    percent.innerText = Math.round(percentComplete, 2) + '% 已经加载';

                    document.getElementById("bar").style.width = speed + "%";
                    document.getElementById("bar").innerHTML = speed + "%";
                    // console.log(Math.round(percentComplete, 2) + '% downloaded');
                    if (percentComplete == 100) {
                        setTimeout(function () {
                            document.getElementById("loadbar").style.display = 'none'
                            document.getElementById("bar").style.display = 'none'
                        }, 500)
                    }
                }
            };
            var texture = new THREE.Texture();

            var loader = new THREE.ImageLoader(manager);
            loader.load(tex, function (image) {
                texture.image = image;
                texture.needsUpdate = true;
            });
            // ����model
            var loader = new THREE.OBJLoader(manager);
            loader.load(mesh, function (object) {
                object.traverse(function (child) {
                    if (child instanceof THREE.Mesh) {
                        // child.material.map = texture;
                        child.material = new THREE.MeshPhongMaterial({ map: texture, emissive: texture, shininess: 1000 });

                    }
                });
                object.scale.x = object.scale.y = object.scale.z = scale1;
                object.position.set(0, 0, 0);
                // object.rotation.set(0,0,60);
                scene.add(object);
                render();
            }, onProgress);


            //��Ⱦ
            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setClearColor(0xffffff, 0);
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);

            controls = new THREE.TrackballControls(camera, renderer.domElement);
            controls.minDistance = 200;
            controls.maxDistance = 2000;

            window.addEventListener('resize', onWindowResize, false);

        }

        //

        function onWindowResize() {

            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();

            renderer.setSize(window.innerWidth, window.innerHeight);
            render();

        }

        function animate() {

            requestAnimationFrame(animate);
            controls.update();
            render();

        }

        function render() {

            renderer.render(scene, camera);
        }
        function playPause() {

            var music = document.getElementById('music2');
            var music_btn = document.getElementById('music_btn2');
            if (music.paused) {
                music.play();
                music_btn.src = 'de_zhou/play.png';
            }
            else {
                music.pause();
                music_btn.src = 'de_zhou/pause.png';
            }

        }
    </script>
</body>


</html>